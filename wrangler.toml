name = "daikin-controller"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".svelte-kit/cloudflare"

[[d1_databases]]
binding = "DB"
database_name = "daikin"
database_id = "808e2d5b-83f6-4162-ab47-37d5eaeb00e9"

[vars]
PUBLIC_APP_NAME = "Daikin Controller"

# Secrets (set via `wrangler secret put`):
# DAIKIN_CLIENT_ID
# DAIKIN_CLIENT_SECRET
# CRON_SECRET (optional, for securing the /api/cron endpoint)

# Note: Cloudflare Pages doesn't support native cron triggers.
# Options for scheduled tasks:
# 1. Use Cloudflare Workers with Cron Triggers (separate worker calling /api/cron)
# 2. Use external cron service (e.g., cron-job.org, easycron.com)
# 3. Use Cloudflare Queues with scheduled producer
#
# Example cron worker (deploy separately):
# [triggers]
# crons = ["0 * * * *"]
#
# Then in the worker, call:
# await fetch("https://your-app.pages.dev/api/cron", {
#   headers: { "x-cron-secret": env.CRON_SECRET }
# })
